{"version":3,"sources":["pages/MoviesPage.js"],"names":["MoviesPage","state","inputValue","data","fetchData","a","query","URLSearchParams","props","location","search","axios","get","then","responce","result","setState","results","console","log","handleChange","e","value","target","handleSubmit","preventDefault","history","push","this","prevProps","onSubmit","type","onChange","map","elem","to","pathname","id","title","Component"],"mappings":"mPAIMA,E,4MACJC,MAAQ,CACNC,WAAY,GACZC,KAAM,I,EAeRC,U,sBAAY,8BAAAC,EAAA,6DACJC,EAAQ,IAAIC,gBAAgB,EAAKC,MAAMC,SAASC,QAD5C,SAGWC,IAClBC,IADkB,mGAC8EN,EAAMM,IAAI,WAC1GC,MAAK,SAAAC,GAAQ,OAAIA,EAASX,QALnB,OAGJY,EAHI,OAMV,EAAKC,SAAS,CAAEb,KAAMY,EAAOE,UAC7BC,QAAQC,IAAIJ,EAAOE,SAPT,2C,EAUZG,aAAe,SAAAC,GACb,IAAQC,EAAUD,EAAEE,OAAZD,MACR,EAAKN,SAAS,CAAEd,WAAYoB,K,EAG9BE,a,uCAAe,WAAMH,GAAN,SAAAhB,EAAA,sDACbgB,EAAEI,iBACF,EAAKjB,MAAMkB,QAAQC,KAAK,CAAEjB,OAAO,SAAD,OAAW,EAAKT,MAAMC,cAFzC,2C,6GA3Bf,WACM0B,KAAKpB,MAAMC,SAASC,QACtBkB,KAAKxB,c,gCAIT,SAAmByB,GACbD,KAAKpB,MAAMC,SAASC,SAAWmB,EAAUpB,SAASC,QACpDkB,KAAKxB,c,oBAwBT,WAAU,IAAD,OACP,OACE,qCACE,uBAAM0B,SAAUF,KAAKJ,aAArB,UACE,uBAAOO,KAAK,OAAOT,MAAOM,KAAK3B,MAAMC,WAAY8B,SAAUJ,KAAKR,eAChE,wBAAQW,KAAK,SAAb,uBAEF,6BACGH,KAAK3B,MAAME,KAAK8B,KAAI,SAAAC,GAAI,OACvB,6BACE,cAAC,IAAD,CACEC,GAAI,CACFC,SAAS,WAAD,OAAaF,EAAKG,IAC1BpC,MAAO,EAAKO,MAAMC,UAHtB,SAMGyB,EAAKI,SAPDJ,EAAKG,gB,GA/CDE,aAgEVvC","file":"static/js/6.4ed7ee3f.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport React, { Component } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nclass MoviesPage extends Component {\r\n  state = {\r\n    inputValue: \"\",\r\n    data: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.location.search) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.location.search !== prevProps.location.search) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  fetchData = async () => {\r\n    const query = new URLSearchParams(this.props.location.search);\r\n\r\n    const result = await axios\r\n      .get(`https://api.themoviedb.org/3/search/movie?api_key=fd24293d59cd022df746242a4a847605&query=${query.get(\"query\")}`)\r\n      .then(responce => responce.data);\r\n    this.setState({ data: result.results });\r\n    console.log(result.results);\r\n  };\r\n\r\n  handleChange = e => {\r\n    const { value } = e.target;\r\n    this.setState({ inputValue: value });\r\n  };\r\n\r\n  handleSubmit = async e => {\r\n    e.preventDefault();\r\n    this.props.history.push({ search: `query=${this.state.inputValue}` });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <input type=\"text\" value={this.state.inputValue} onChange={this.handleChange} />\r\n          <button type=\"submit\">Search</button>\r\n        </form>\r\n        <ul>\r\n          {this.state.data.map(elem => (\r\n            <li key={elem.id}>\r\n              <NavLink\r\n                to={{\r\n                  pathname: `/movies/${elem.id}`,\r\n                  state: this.props.location\r\n                }}\r\n              >\r\n                {elem.title}\r\n              </NavLink>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}